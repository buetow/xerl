#!/usr/bin/perl

use strict;
use warnings;

use Xerl;

use FCGI;
use Socket;
use Sys::Hostname;

my $host = hostname();
my $config =
  -e "xerldev-$host.conf"
  ? "xerldev-$host.conf"
  : ( -e "xerl-$host.conf" ? "xerl-$host.conf" : 'config.conf' );

while ( FCGI::accept >= 0 ) {
  my Xerl $xerl = Xerl->new( config => $config );
  $xerl->run();
}
